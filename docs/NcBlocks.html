<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!--                                             -->
<!-- Author: ROOT team (rootdev@cern.ch)         -->
<!--                                             -->
<!--   Date: Thu Oct 17 15:17:05 2024            -->
<!--                                             -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>NcBlocks</title>
<meta name="rating" content="General" />
<meta name="objecttype" content="Manual" />
<meta name="keywords" content="software development, oo, object oriented, unix, x11, windows, c++, html, rene brun, fons rademakers, cern" />
<meta name="description" content="ROOT - An Object Oriented Framework For Large Scale Data Analysis." />
<link rel="stylesheet" type="text/css" href="ROOT.css" id="ROOTstyle" />
<script type="text/javascript" src="ROOT.js"></script>
</head>
<body  onload="javascript:SetValuesFromCookie();"><div id="body_content">
<div id="root_header"><img src="http://root.cern.ch/drupal/sites/default/files/rootdrawing-logo.png" alt="ROOT logo"/></div>
<a name="TopOfPage"></a>
<script type="text/javascript">WriteFollowPageBox('class NcBlocks','','NcBlocks.h');</script>
<div id="toplinks">
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Quick Links:</span>
<a class="descrheadentry" href="http://root.cern.ch">ROOT Homepage</a>
<a class="descrheadentry" href="./ClassIndex.html">Class Index</a>
<a class="descrheadentry" href="./ClassHierarchy.html">Class Hierarchy</a></div>
<script type="text/javascript">
function onSearch() {
var s='http://www.google.com/search?q=%s+site%3A%u+-site%3A%u%2Fsrc%2F+-site%3A%u%2Fexamples%2F';
var ref=String(document.location.href).replace(/https?:\/\//,'').replace(/\/[^\/]*$/,'').replace(/\//g,'%2F');
window.location.href=s.replace(/%u/ig,ref).replace(/%s/ig,escape(document.searchform.t.value));
return false;}
</script>
<form id="searchform" name="searchform" onsubmit="return onSearch()" action="javascript:onSearch();" method="post">
<input name="t" size="30" value="Search documentation..." onfocus="if (document.searchform.t.value=='Search documentation...') document.searchform.t.value='';"></input>
<a id="searchlink"  title="www.google.com"  href="javascript:onSearch();" onclick="return onSearch()">Search</a></form>
</div>
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Source:</span>
<a class="descrheadentry" href="src/NcBlocks.h.html">header file</a>
<a class="descrheadentry" href="src/NcBlocks.cxx.html">source file</a>
<a class="descrheadentry" href="NcBlocks_Tree.pdf">inheritance tree (.pdf)</a> 
</div></div>
<div class="descrhead"><div class="descrheadcontent">
<span class="descrtitle">Sections:</span>
<a class="descrheadentry" href="#NcBlocks:description">class description</a> 
<a class="descrheadentry" href="#NcBlocks:Function_Members">function members</a>
<a class="descrheadentry" href="#NcBlocks:Data_Members">data members</a>
<a class="descrheadentry" href="#NcBlocks:Class_Charts">class charts</a>
</div></div>
</div>
<div class="location">
<a class="locationlevel" href="index.html">NCFS</a>
 &#187; <a class="locationlevel" href="./SOURCE_Index.html">SOURCE</a>
 &#187; <a class="locationlevel" href="#TopOfPage">NcBlocks</a>
</div>
<div class="dropshadow"><div class="withshadow"><h1><a name="NcBlocks:description"></a>class NcBlocks</h1>
<div class="classdescr">
<pre>
 <a href="./NcBlocks.html#NcBlocks:Class" title="TClass* NcBlocks::Class()">Class</a> <a href="./NcBlocks.html">NcBlocks</a>
 <a href="./NcBlocks.html#NcBlocks:Class" title="TClass* NcBlocks::Class()">Class</a> for (Bayesian) Block treatment of sequential data.

 This class provides a tool set to detect and characterize local variability
 in sequential data.

 A very common case are observations in the form of time series, and as such
 this will be used for illustration in the documentation. However, the various
 procedures provided in this class apply to any form of sequential data.

 Time series can be divided in three categories, called Data Modes :

 1) Recorded times of events, so called Time-Tagged Event (TTE) data.
 2) Counts of events in time bins.
 3) Measurements of a (quasi) continuous observable at a sequence of points in time.

 A Bayesian Block analysis provides a procedure to automatically detect local
 variability in the data stream by a dynamic partitioning of the dataset, resulting
 in data blocks of different length over which the event rate, event count or
 measured value can be regarded as constant.

 For each Data Mode a dedicated Bayesian Block analysis procedure is provided via
 the various <a href="./NcBlocks.html#NcBlocks:GetBlocks" title="Double_t NcBlocks::GetBlocks(TH1* hin,Double_t fpr,TH1* hout,Int_t ntrig=0) or overloads">GetBlocks</a>() member functions.

 On the other hand, this class also provides <a href="./NcBlocks.html#NcBlocks:GetBlocks" title="Double_t NcBlocks::GetBlocks(TH1* hin,Double_t fpr,TH1* hout,Int_t ntrig=0) or overloads">GetBlocks</a>() member functions which allow
 the user to form blocks defined by a fixed number of <span class="string">"n"</span> samplings c.q. bins.
 In this case the height of each block is defined by the mean (or median) value of the
 recorded values within each set of <span class="string">"n"</span> samplings.
 These member functions provide an efficient way to identify (pedestal) variations in case
 these might be expected to occur after recording <span class="string">"n"</span> samples due to the specific DAQ design.
 In principle a Bayesian Block analysis would also be able to identify these variations
 over the sets of <span class="string">"n"</span> samplings, but the analysis over a fixed number of <span class="string">"n"</span> samplings
 is much faster than the dynamic Bayesian Block analysis.

 In a Bayesian Block analysis, local variability in the sequential data stream is indicated
 by so called Change Points, at which a step is introduced in e.g. the event rate, event count
 or measured value.

 Since the data treatment is inherently sequential, it is also possible to
 trigger c.q. stop after the occurrence of a certain number of Change Points.
 For instance, an online trigger system may be obtained by specifying to stop at the
 first occurrence of a Change Point.
 Please refer to the documentation of the <a href="./NcBlocks.html#NcBlocks:GetBlocks" title="Double_t NcBlocks::GetBlocks(TH1* hin,Double_t fpr,TH1* hout,Int_t ntrig=0) or overloads">GetBlocks</a>() member functions for further details.

 Details of the various Bayesian Block algorithms can be found in the publication :

 J.D. Scargle et al., The Astrophysical Journal 764 (2013) 167. (ArXiv:1207.5578).


 Some coding examples:



 Example 1: Unbinned data (Data Mode 1)


 gSystem-&gt;Load(<span class="string">"ncfspack"</span>);

 <a href="./NcBlocks.html">NcBlocks</a> q;

 <a href="./NcSample.html">NcSample</a> s(<span class="string">"Event times"</span>);
 s.SetStoreMode();
 s.SetNames(<span class="string">"Time"</span>);

 // Construct and store artificial event times
 <a href="./ListOfTypes.html#Int_t">Int_t</a> nevt=100;
 <a href="./ListOfTypes.html#Float_t">Float_t</a> t=0;
 <a href="./ListOfTypes.html#Int_t">Int_t</a> low=nevt/4;
 <a href="./ListOfTypes.html#Int_t">Int_t</a> mid=nevt/2;
 <a href="./ListOfTypes.html#Int_t">Int_t</a> up=3*nevt/4;
 <a href="./ListOfTypes.html#Float_t">Float_t</a> add=0;
 for (<a href="./ListOfTypes.html#Int_t">Int_t</a> i=1; i&lt;=nevt; i++)
 {
  if (i&lt;low)
  {
   add=1;
  }
  else if (i&lt;mid)
  {
   add=0.1;
  }
  else if (i&lt;up)
  {
   add=1;
  }
  else
  {
   add=0.2;
  }
  t+=add;
  s.Enter(t);
 }

 <a href="./ListOfTypes.html#Float_t">Float_t</a> fpr=0.1;
 TH1F hblock;
 hblock.SetName(<span class="string">"hblock"</span>);
 q.<a href="./NcBlocks.html#NcBlocks:GetBlocks" title="Double_t NcBlocks::GetBlocks(TH1* hin,Double_t fpr,TH1* hout,Int_t ntrig=0) or overloads">GetBlocks</a>(s,1,fpr,&amp;hblock);

 TCanvas c(<span class="string">"c"</span>,<span class="string">"c"</span>);
 c.Divide(1,2);
 c.cd(1);
 TH1D hs=s.Get1DHistogram(1,0,<a href="./ListOfTypes.html#Bool_t">kFALSE</a>,1000);
 hs.Draw();
 c.cd(2);
 hblock.Draw();


 Example 2: Binned data (Data Mode 2)


 gSystem-&gt;Load(<span class="string">"ncfspack"</span>);

 <a href="./NcBlocks.html">NcBlocks</a> q;

 TH1F h(<span class="string">"h"</span>,<span class="string">"Example 2: Binned data (Data Mode 2);Time in sec.;Weighted counts"</span>,100,0,100);

 h.Fill(0,1.5);
 h.Fill(1,1.0);
 h.Fill(2,1.3);
 h.Fill(3,0.9);
 h.Fill(5,1.1);
 h.Fill(6,1.2);
 h.Fill(7,1.1);
 h.Fill(8,1.3);
 h.Fill(9,2);
 h.Fill(10,2.5);
 h.Fill(11,3.3);
 h.Fill(12,5);
 h.Fill(13,6);
 h.Fill(14,6);
 h.Fill(30,8.1);
 h.Fill(31,8.3);
 h.Fill(32,8.5);
 h.Fill(33,8.2);
 h.Fill(40,2);
 h.Fill(41,2);
 h.Fill(42,2);
 h.Fill(43,2);
 h.Fill(60,1);
 h.Fill(61,1);
 h.Fill(62,1);
 h.Fill(63,1);
 h.Fill(80,-3);
 h.Fill(81,-5.5);
 h.Fill(82,-8);
 h.Fill(83,-3.2);
 h.Fill(90,1);
 h.Fill(91,1);
 h.Fill(92,1);
 h.Fill(93,1);

 <a href="./ListOfTypes.html#Float_t">Float_t</a> fpr=0.1;
 TH1F hblock;
 hblock.SetName(<span class="string">"hblock"</span>);
 q.<a href="./NcBlocks.html#NcBlocks:GetBlocks" title="Double_t NcBlocks::GetBlocks(TH1* hin,Double_t fpr,TH1* hout,Int_t ntrig=0) or overloads">GetBlocks</a>(&amp;h,fpr,&amp;hblock);

 // Subtract the Block values from the original histogram bin contents
 // without scaling w.r.t. the bin size
 TH1F hdif;
 q.<a href="./NcBlocks.html#NcBlocks:Add" title="void NcBlocks::Add(TH1* h1,TH1* h2,TH1* hout,Bool_t scale,Double_t c,Double_t d=0) or overloads">Add</a>(&amp;h,&amp;hblock,&amp;hdif,0,-1);

 TCanvas c(<span class="string">"c"</span>,<span class="string">"c"</span>);
 c.Divide(1,3);
 c.cd(1);
 h.SetLineWidth(2);
 h.Draw();
 hblock.Draw(<span class="string">"same"</span>);
 c.cd(2);
 hblock.Draw();
 c.cd(3);
 hdif.SetLineWidth(2);
 hdif.Draw();


 Example 3: Measurement data (Data Mode 3)


 gSystem-&gt;Load(<span class="string">"ncfspack"</span>);

 <a href="./NcBlocks.html">NcBlocks</a> q;

 <a href="./NcRandom.html">NcRandom</a> ran;

 TGraphErrors gr;
 gr.SetName(<span class="string">"Cosine"</span>);
 gr.SetTitle(<span class="string">"Example 3 : Measurement data (Data Mode 3);x in radians;cos(x)"</span>);

 // Create and store some artificial measurements
 <a href="./ListOfTypes.html#Double_t">Double_t</a> pi=acos(-1.);
 <a href="./ListOfTypes.html#Float_t">Float_t</a> x=0;
 <a href="./ListOfTypes.html#Float_t">Float_t</a> y=0;
 <a href="./ListOfTypes.html#Float_t">Float_t</a> ex=0;
 <a href="./ListOfTypes.html#Float_t">Float_t</a> ey=0;
 <a href="./ListOfTypes.html#Int_t">Int_t</a> nloop=100;
 <a href="./ListOfTypes.html#Int_t">Int_t</a> jpoint=0;
 <a href="./ListOfTypes.html#Double_t">Double_t</a> step=2.*pi/<a href="./ListOfTypes.html#float">float</a>(nloop);
 <a href="./ListOfTypes.html#Int_t">Int_t</a> itest=0;
 for (<a href="./ListOfTypes.html#Int_t">Int_t</a> i=0; i&lt;=nloop; i++)
 {
  y=cos(x);
  ex=0.1;
  ey=fabs(0.1*y);
  y+=ey*ran.Uniform(-1.,1.);
  itest=i%5;
  if (!itest)
  {
   itest=i;
   gr.SetPoint(jpoint,x,y);
   gr.SetPointError(jpoint,ex,ey);
   jpoint++;
  }
  x+=step;
 }

 <a href="./ListOfTypes.html#Float_t">Float_t</a> fpr=0.1;
 TH1F hblock;
 hblock.SetName(<span class="string">"hblock"</span>);
 q.<a href="./NcBlocks.html#NcBlocks:GetBlocks" title="Double_t NcBlocks::GetBlocks(TH1* hin,Double_t fpr,TH1* hout,Int_t ntrig=0) or overloads">GetBlocks</a>(gr,fpr,&amp;hblock);

 // Subtract the Block values from the original graph
 TGraphErrors gdif;
 q.<a href="./NcBlocks.html#NcBlocks:Add" title="void NcBlocks::Add(TH1* h1,TH1* h2,TH1* hout,Bool_t scale,Double_t c,Double_t d=0) or overloads">Add</a>(&amp;gr,&amp;hblock,&amp;gdif,-1);

 TCanvas c(<span class="string">"c"</span>,<span class="string">"c"</span>);
 c.Divide(1,3);
 c.cd(1);
 gr.Draw(<span class="string">"A*"</span>);
 hblock.Draw(<span class="string">"same"</span>);
 c.cd(2);
 hblock.Draw();
 c.cd(3);
 gdif.Draw(<span class="string">"A*"</span>);


 Example 4: Triggering


 gSystem-&gt;Load(<span class="string">"ncfspack"</span>);

 <a href="./NcBlocks.html">NcBlocks</a> q;

 TH1F h(<span class="string">"h"</span>,<span class="string">"Example 4: Triggering;Time in sec.;Weighted counts"</span>,100,0,100);

 h.Fill(0,1.5);
 h.Fill(1,1);
 h.Fill(2,1.3);
 h.Fill(3,0.9);
 h.Fill(5,1.1);
 h.Fill(6,1.2);
 h.Fill(7,1.1);
 h.Fill(8,1.3);
 h.Fill(9,2);
 h.Fill(10,2.5);
 h.Fill(11,3.3);
 h.Fill(12,5);
 h.Fill(13,6);
 h.Fill(14,6);
 h.Fill(30,8.1);
 h.Fill(31,8.3);
 h.Fill(32,8.5);
 h.Fill(33,8.2);
 h.Fill(40,2);
 h.Fill(41,2);
 h.Fill(42,2);
 h.Fill(43,2);
 h.Fill(60,1);
 h.Fill(61,1);
 h.Fill(62,1);
 h.Fill(63,1);
 h.Fill(80,-3);
 h.Fill(81,-5.5);
 h.Fill(82,-8);
 h.Fill(83,-3.2);
 h.Fill(90,1);
 h.Fill(91,1);
 h.Fill(92,1);
 h.Fill(93,1);
 h.Fill(97,5);
 h.Fill(98,7);
 h.Fill(99,10);

 // Trigger on the first rising edge by regarding
 // the histogram data as a realtime incoming data stream
 <a href="./ListOfTypes.html#Float_t">Float_t</a> fpr=0.1;
 <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig=1;
 TH1F hblock;
 hblock.SetName(<span class="string">"hblock"</span>);
 <a href="./ListOfTypes.html#Double_t">Double_t</a> xtrig=q.<a href="./NcBlocks.html#NcBlocks:GetBlocks" title="Double_t NcBlocks::GetBlocks(TH1* hin,Double_t fpr,TH1* hout,Int_t ntrig=0) or overloads">GetBlocks</a>(&amp;h,fpr,&amp;hblock,ntrig);

 <a href="./ListOfTypes.html#ostream">cout</a> &lt;&lt; <span class="string">" Data stream triggered at : "</span> &lt;&lt; xtrig &lt;&lt; endl;

 TCanvas c(<span class="string">"c"</span>,<span class="string">"c"</span>);
 h.SetLineWidth(2);
 h.Draw();
 hblock.Draw(<span class="string">"same"</span>);


 Example 5: Real time animation


 gSystem-&gt;Load(<span class="string">"ncfspack"</span>);

 <a href="./NcBlocks.html">NcBlocks</a> q;

 <a href="./ListOfTypes.html#Float_t">Float_t</a> fpr=0.1;
 <a href="./ListOfTypes.html#Int_t">Int_t</a> nevt=100;
 <a href="./ListOfTypes.html#Float_t">Float_t</a> arr[nevt];

 <a href="./ListOfTypes.html#Float_t">Float_t</a> t=0;
 <a href="./ListOfTypes.html#Int_t">Int_t</a> low=nevt/4;
 <a href="./ListOfTypes.html#Int_t">Int_t</a> mid=nevt/2;
 <a href="./ListOfTypes.html#Int_t">Int_t</a> up=3*nevt/4;
 <a href="./ListOfTypes.html#Float_t">Float_t</a> add=0;
 TH1F hblock;
 hblock.SetName(<span class="string">"hblock"</span>);
 TCanvas c(<span class="string">"c"</span>,<span class="string">"c"</span>);
 // Construct and store artificial event times
 for (<a href="./ListOfTypes.html#Int_t">Int_t</a> i=1; i&lt;=nevt; i++)
 {
  if (i&lt;low)
  {
   add=1;
  }
  else if (i&lt;mid)
  {
   add=0.1;
  }
  else if (i&lt;up)
  {
   add=1;
  }
  else
  {
   add=0.2;
  }
  t+=add;
  arr[i-1]=t;

  // Display the Block histogram step by step
  if (i&gt;1)
  {
   q.<a href="./NcBlocks.html#NcBlocks:GetBlocks" title="Double_t NcBlocks::GetBlocks(TH1* hin,Double_t fpr,TH1* hout,Int_t ntrig=0) or overloads">GetBlocks</a>(i,arr,fpr,&amp;hblock);
   hblock.Draw();
   c.Update();
   gSystem-&gt;Sleep(25);
  }
 }

--- Author: Nick van Eijndhoven, IIHE-VUB, Brussel, September 7, 2021  08:06Z
- Modified: Nick van Eijndhoven, IIHE-VUB, Brussel, October 22, 2023  13:13Z

</pre></div>
</div></div>

<div id="functions">
<h2><a id="NcBlocks:Function_Members"></a>Function Members (Methods)</h2>
<div class="access" id="funcpubl"><b>public:</b>
<table class="func" id="tabfuncpubl" cellspacing="0">
<tr class="func"><td class="funcret"></td><td class="funcname"><a class="funcname" href="#NcBlocks:NcBlocks">NcBlocks</a>()</td></tr>
<tr class="func"><td class="funcret"></td><td class="funcname"><a class="funcname" href="#NcBlocks:NcBlocks@1">NcBlocks</a>(<span class="keyword">const</span> <a href="./NcBlocks.html">NcBlocks</a>&amp; q)</td></tr>
<tr class="func"><td class="funcret"> virtual</td><td class="funcname"><a class="funcname" href="#NcBlocks:_NcBlocks">~NcBlocks</a>()</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#NcBlocks:Add@1">Add</a>(TGraph* gr, TH1* h, TGraph* gout, <a href="./ListOfTypes.html#Double_t">Double_t</a> c, <a href="./ListOfTypes.html#Double_t">Double_t</a> d = 0)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#NcBlocks:Add">Add</a>(TH1* h1, TH1* h2, TH1* hout, <a href="./ListOfTypes.html#Bool_t">Bool_t</a> scale, <a href="./ListOfTypes.html#Double_t">Double_t</a> c, <a href="./ListOfTypes.html#Double_t">Double_t</a> d = 0)</td></tr>
<tr class="func"><td class="funcret">static TClass*</td><td class="funcname"><a class="funcname" href="#NcBlocks:Class">Class</a>()</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks">GetBlocks</a>(TH1* hin, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@5">GetBlocks</a>(TGraphErrors gr, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Int_t">Int_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@9">GetBlocks</a>(TH1* hin, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Int_t">Int_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@14">GetBlocks</a>(TGraph* gr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@1">GetBlocks</a>(<a href="./NcSample.html">NcSample</a> s, <a href="./ListOfTypes.html#Int_t">Int_t</a> i, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@2">GetBlocks</a>(<a href="./NcSample.html">NcSample</a> s, TString name, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@3">GetBlocks</a>(<a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Double_t">Double_t</a>* arr, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@4">GetBlocks</a>(<a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Float_t">Float_t</a>* arr, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@6">GetBlocks</a>(TGraph gr, TF1 f, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@7">GetBlocks</a>(TGraph gr, TString f, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@8">GetBlocks</a>(TGraph gr, <a href="./ListOfTypes.html#Double_t">Double_t</a> nrms, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Int_t">Int_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@10">GetBlocks</a>(<a href="./NcSample.html">NcSample</a> s, <a href="./ListOfTypes.html#Int_t">Int_t</a> i, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Int_t">Int_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@11">GetBlocks</a>(<a href="./NcSample.html">NcSample</a> s, TString name, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Int_t">Int_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@12">GetBlocks</a>(<a href="./ListOfTypes.html#Int_t">Int_t</a> nr, <a href="./ListOfTypes.html#Double_t">Double_t</a>* arr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Int_t">Int_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlocks@13">GetBlocks</a>(<a href="./ListOfTypes.html#Int_t">Int_t</a> nr, <a href="./ListOfTypes.html#Float_t">Float_t</a>* arr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</td></tr>
<tr class="func"><td class="funcret">virtual TClass*</td><td class="funcname"><a class="funcname" href="#NcBlocks:IsA">IsA</a>() <span class="keyword">const</span></td></tr>
<tr class="func"><td class="funcret"><a href="./NcBlocks.html">NcBlocks</a>&amp;</td><td class="funcname"><a class="funcname" href="#NcBlocks:operator_">operator=</a>(<span class="keyword">const</span> <a href="./NcBlocks.html">NcBlocks</a>&amp;)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#NcBlocks:Rebin">Rebin</a>(TH1* hin, TH1* hout, <a href="./ListOfTypes.html#Bool_t">Bool_t</a> scale, <a href="./ListOfTypes.html#Int_t">Int_t</a> nbins = 0, <a href="./ListOfTypes.html#Double_t">Double_t</a> xmin = 0, <a href="./ListOfTypes.html#Double_t">Double_t</a> xmax = -1)</td></tr>
<tr class="func"><td class="funcret">virtual <span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#NcBlocks:ShowMembers">ShowMembers</a>(TMemberInspector&amp;)</td></tr>
<tr class="func"><td class="funcret">virtual <span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#NcBlocks:Streamer">Streamer</a>(TBuffer&amp;)</td></tr>
<tr class="func"><td class="funcret"><span class="keyword">void</span></td><td class="funcname"><a class="funcname" href="#NcBlocks:StreamerNVirtual">StreamerNVirtual</a>(TBuffer&amp; ClassDef_StreamerNVirtual_b)</td></tr>

</table></div>
<div class="access" id="funcprot"><b>protected:</b>
<table class="func" id="tabfuncprot" cellspacing="0">
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetBlockFitness">GetBlockFitness</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a> n, <a href="./ListOfTypes.html#Double_t">Double_t</a> len)</td></tr>
<tr class="func"><td class="funcret"><a href="./ListOfTypes.html#Double_t">Double_t</a></td><td class="funcname"><a class="funcname" href="#NcBlocks:GetPrior">GetPrior</a>(<a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr)</td></tr>

</table></div>
</div>

<div id="datamembers">
<h2><a name="NcBlocks:Data_Members"></a>Data Members</h2>
<div class="access" id="dataprot"><b>protected:</b>
<table class="data" id="tabdataprot" cellspacing="0">
<tr class="data"><td class="datatype"><a href="./ListOfTypes.html#Int_t">Int_t</a></td><td class="dataname"><a name="NcBlocks:fMode"></a>fMode</td><td class="datadesc">The Data Mode</td></tr>

</table></div>
</div>
<h2><a id="NcBlocks:Class_Charts"></a>Class Charts</h2>
<!--INHERITANCE TREE-->
<table><tr><td width="10%"></td><td width="70%"><a href="ClassHierarchy.html">Inheritance Chart</a>:</td></tr><tr class="inhtree"><td width="10%"></td><td width="70%"><table class="inhtree"><tr><td>
<table width="100%" border="0" cellpadding ="0" cellspacing="2"><tr>
<td>
<center><big><b><tt><a name="NcBlocks" href="./NcBlocks.html">NcBlocks</a></tt></b></big></center>
</td>
<td><table><tr>
<td></td>
</tr></table></td>
</tr></table>
</td></tr></table></td></tr></table>
<h2>Function documentation</h2>
<div class="funcdoc"><span class="funcname"> <a class="funcname" name="NcBlocks:NcBlocks" href="src/NcBlocks.cxx.html#ZoD1BE">NcBlocks</a>()</span><br />
<div class="funccomm"><pre> Default constructor.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"> <a class="funcname" name="NcBlocks:_NcBlocks" href="src/NcBlocks.cxx.html#bI.BZB">~NcBlocks</a>()</span><br />
<div class="funccomm"><pre> Default destructor.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"> <a class="funcname" name="NcBlocks:NcBlocks@1" href="src/NcBlocks.cxx.html#rKbm.C">NcBlocks</a>(<span class="keyword">const</span> <a href="./NcBlocks.html">NcBlocks</a>&amp; q)</span><br />
<div class="funccomm"><pre> Copy constructor.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="NcBlocks:GetPrior" href="src/NcBlocks.cxx.html#d9Q8pB">GetPrior</a>(<a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr)</span><br />
<div class="funccomm"><pre> Internal member function to provide the prior fitness value for each individual block.
 The returned value corresponds to -(ncp_prior) of the article of J.D. Scargle et al.

 Input arguments :

 n    : The number of Data Cells
 fpr  : The requested <a href="./ListOfTypes.html#bool">false</a> positive rate

 Note :

 For Data Mode 1 and 2, the result is rather accurate on the full fpr interval [0,1].
 For Data Mode 3 the fit for fpr=0.05 was given in the article of J.D. Scargle et al.
 in the form : prior=c+s*log10(n) with c=1.32 and s=0.577.
 For the fpr values of 0.01, 0.1, 0.2, 0.3, 0.4 and 0.5 the data were read off from
 Fig. 6 in the article of J.D. Scargle et al. and fits of prior vs. N were made to provide
 the parameters c and s for each fpr value.
 These data sets of c and s were then used to provide fits of c vs. fpr and s vs. fpr,
 which allows to determine the parameter values of c and s for a certain fpr value,
 and subsequently the value of the corresponding prior.

 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="NcBlocks:GetBlockFitness" href="src/NcBlocks.cxx.html#waW30E">GetBlockFitness</a>(<a href="./ListOfTypes.html#Double_t">Double_t</a> n, <a href="./ListOfTypes.html#Double_t">Double_t</a> len)</span><br />
<div class="funccomm"><pre> Internal member function to provide the fitness value for a certain block content
 in the case of Data Mode 1 or 2.

 Input arguments :

 n     : The (weighted) number of events in the block
 len   : The length of the block

 The length of the block represents the summed time span of the contained Data Cells.

 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="NcBlocks:GetBlocks" href="src/NcBlocks.cxx.html#KZHl6E">GetBlocks</a>(TH1* hin, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</span><br />
<div class="funccomm"><pre> Get the Bayesian Block partitions for the binned data (Data Mode 2) of histogram <span class="string">"hin"</span>
 with a <a href="./ListOfTypes.html#bool">false</a> positive rate <span class="string">"fpr"</span>, and provide the results in the 1-D histogram <span class="string">"hout"</span>.

 Note : Both <span class="string">"hin"</span> and <span class="string">"hout"</span> must be existing 1-dimensional histograms.

 Each new block is started at a so called Change Point, to indicate a significant change
 in the bin contents of the input histogram <span class="string">"hin"</span>.
 The various Change Points represent the start of the various (variable) sized bins
 of the resulting histogram <span class="string">"hout"</span>.
 Since the data treatment is inherently sequential, the user may use the argument <span class="string">"ntrig"</span>
 to trigger c.q. stop after the occurrence of ntrig Change Points.
 For instance, an online trigger system may be obtained by specifying ntrig=1.

 Meaning of the input argument <span class="string">"ntrig"</span> :

 ntrig &gt;0 : Only consider Change Points indicating a rising edge
       &lt;0 : Only consider Change Points indicating a falling edge
       =0 : No triggering c.q. early stopping of the data processing will be performed

 The default value is ntrig=0.

 The returned value is the <span class="string">"X-value"</span> of the selected Change Point, e.g. trigger time.
 In case ntrig=0 the return value corresponds to the 1st Change Point, irrespective
 whether that represents a rising or falling edge.

 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="NcBlocks:GetBlocks@1" href="src/NcBlocks.cxx.html#U5Y0G">GetBlocks</a>(<a href="./NcSample.html">NcSample</a> s, <a href="./ListOfTypes.html#Int_t">Int_t</a> i, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</span><br />
<div class="funccomm"><pre> Get the Bayesian Block partitions for the (Data Mode 1) i-th variable of <a href="./NcSample.html">NcSample</a> <span class="string">"s"</span>
 with a <a href="./ListOfTypes.html#bool">false</a> positive rate <span class="string">"fpr"</span>, and provide the results in 1-D histogram <span class="string">"hout"</span>.
 A common case is where the <a href="./NcSample.html">NcSample</a> contains recorded event times.

 Notes :

 1) The Store Mode of the <a href="./NcSample.html">NcSample</a> must be activated.
 2) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.

 Each new block is started at a so called Change Point, to indicate a significant change
 in the event rate based on the recordings in the provided <a href="./NcSample.html">NcSample</a>.
 The various Change Points represent the start of the various (variable) sized bins
 of the resulting histogram <span class="string">"hout"</span>.
 Since the data treatment is inherently sequential, the user may use the argument <span class="string">"ntrig"</span>
 to trigger c.q. stop after the occurrence of ntrig Change Points.
 For instance, an online trigger system may be obtained by specifying ntrig=1.

 Meaning of the input argument <span class="string">"ntrig"</span> :

 ntrig &gt;0 : Only consider Change Points indicating a rising edge
       &lt;0 : Only consider Change Points indicating a falling edge
       =0 : No triggering c.q. early stopping of the data processing will be performed

 The default value is ntrig=0.

 The returned value is the <span class="string">"X-value"</span> of the selected Change Point, e.g. trigger time.
 In case ntrig=0 the return value corresponds to the 1st Change Point, irrespective
 whether that represents a rising or falling edge.

 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="NcBlocks:GetBlocks@2" href="src/NcBlocks.cxx.html#Opgm.">GetBlocks</a>(<a href="./NcSample.html">NcSample</a> s, TString name, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</span><br />
<div class="funccomm"><pre> Get the Bayesian Block partitions for the (Data Mode 1) named variable of <a href="./NcSample.html">NcSample</a> <span class="string">"s"</span>
 with a <a href="./ListOfTypes.html#bool">false</a> positive rate <span class="string">"fpr"</span>, and provide the results in 1-D histogram <span class="string">"hout"</span>.
 A common case is where the <a href="./NcSample.html">NcSample</a> contains recorded event times.

 Notes :

 1) The Store Mode of the <a href="./NcSample.html">NcSample</a> must be activated.
 2) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.

 Each new block is started at a so called Change Point, to indicate a significant change
 in the event rate based on the recordings in the provided <a href="./NcSample.html">NcSample</a>.
 The various Change Points represent the start of the various (variable) sized bins
 of the resulting histogram <span class="string">"hout"</span>.
 Since the data treatment is inherently sequential, the user may use the argument <span class="string">"ntrig"</span>
 to trigger c.q. stop after the occurrence of ntrig Change Points.
 For instance, an online trigger system may be obtained by specifying ntrig=1.

 Meaning of the input argument <span class="string">"ntrig"</span> :

 ntrig &gt;0 : Only consider Change Points indicating a rising edge
       &lt;0 : Only consider Change Points indicating a falling edge
       =0 : No triggering c.q. early stopping of the data processing will be performed

 The default value is ntrig=0.

 The returned value is the <span class="string">"X-value"</span> of the selected Change Point, e.g. trigger time.
 In case ntrig=0 the return value corresponds to the 1st Change Point, irrespective
 whether that represents a rising or falling edge.

 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="NcBlocks:GetBlocks@3" href="src/NcBlocks.cxx.html#BezAVE">GetBlocks</a>(<a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Double_t">Double_t</a>* arr, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</span><br />
<div class="funccomm"><pre> Get the Bayesian Block partitions for the <span class="string">"n"</span> data recordings (Data Mode 1)
 contained in the data array <span class="string">"arr"</span> with a <a href="./ListOfTypes.html#bool">false</a> positive rate <span class="string">"fpr"</span>,
 and provide the results in the 1-D histogram <span class="string">"hout"</span>.
 A common case is where the array <span class="string">"arr"</span> contains recorded event times.

 Notes :

 1) The data in array <span class="string">"arr"</span> are interpreted as Data Mode 1.
    For Data Mode 2 or Data Mode 3 treatment, please use the corresponding <a href="./NcBlocks.html#NcBlocks:GetBlocks" title="Double_t NcBlocks::GetBlocks(TH1* hin,Double_t fpr,TH1* hout,Int_t ntrig=0) or overloads">GetBlocks</a>() function.
 2) The data elements in the array <span class="string">"arr"</span> do not need to be ordered.
 3) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.

 Each new block is started at a so called Change Point, to indicate a significant change
 in the event rate based on the recordings in the provided array.
 The various Change Points represent the start of the various (variable) sized bins
 of the resulting histogram <span class="string">"hout"</span>.
 Since the data treatment is inherently sequential, the user may use the argument <span class="string">"ntrig"</span>
 to trigger c.q. stop after the occurrence of ntrig Change Points.
 For instance, an online trigger system may be obtained by specifying ntrig=1.

 Meaning of the input argument <span class="string">"ntrig"</span> :

 ntrig &gt;0 : Only consider Change Points indicating a rising edge
       &lt;0 : Only consider Change Points indicating a falling edge
       =0 : No triggering c.q. early stopping of the data processing will be performed

 The default value is ntrig=0.

 The returned value is the <span class="string">"X-value"</span> of the selected Change Point, e.g. trigger time.
 In case ntrig=0 the return value corresponds to the 1st Change Point, irrespective
 whether that represents a rising or falling edge.

 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="NcBlocks:GetBlocks@4" href="src/NcBlocks.cxx.html#nZfvP">GetBlocks</a>(<a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Float_t">Float_t</a>* arr, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</span><br />
<div class="funccomm"><pre> Get the Bayesian Block partitions for the <span class="string">"n"</span> data recordings (Data Mode 1)
 contained in the data array <span class="string">"arr"</span> with a <a href="./ListOfTypes.html#bool">false</a> positive rate <span class="string">"fpr"</span>,
 and provide the results in the 1-D histogram <span class="string">"hout"</span>.
 A common case is where the array <span class="string">"arr"</span> contains recorded event times.

 Notes :

 1) The data in array <span class="string">"arr"</span> are interpreted as Data Mode 1.
    For Data Mode 2 or Data Mode 3 treatment, please use the corresponding <a href="./NcBlocks.html#NcBlocks:GetBlocks" title="Double_t NcBlocks::GetBlocks(TH1* hin,Double_t fpr,TH1* hout,Int_t ntrig=0) or overloads">GetBlocks</a>() function.
 2) The data elements in the array <span class="string">"arr"</span> do not need to be ordered.
 3) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.

 Each new block is started at a so called Change Point, to indicate a significant change
 in the event rate based on the recordings in the provided array.
 The various Change Points represent the start of the various (variable) sized bins
 of the resulting histogram <span class="string">"hout"</span>.
 Since the data treatment is inherently sequential, the user may use the argument <span class="string">"ntrig"</span>
 to trigger c.q. stop after the occurrence of ntrig Change Points.
 For instance, an online trigger system may be obtained by specifying ntrig=1.

 Meaning of the input argument <span class="string">"ntrig"</span> :

 ntrig &gt;0 : Only consider Change Points indicating a rising edge
       &lt;0 : Only consider Change Points indicating a falling edge
       =0 : No triggering c.q. early stopping of the data processing will be performed

 The default value is ntrig=0.

 The returned value is the <span class="string">"X-value"</span> of the selected Change Point, e.g. trigger time.
 In case ntrig=0 the return value corresponds to the 1st Change Point, irrespective
 whether that represents a rising or falling edge.

 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="NcBlocks:GetBlocks@5" href="src/NcBlocks.cxx.html#ZWmIb">GetBlocks</a>(TGraphErrors gr, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</span><br />
<div class="funccomm"><pre> Get the Bayesian Block partitions for measurements of an observable (Data Mode 3)
 with a <a href="./ListOfTypes.html#bool">false</a> positive rate <span class="string">"fpr"</span>, and provide the results in 1-D histogram <span class="string">"hout"</span>.

 Notes :

 1) It is essential that the errors on the y-values are provided, since they are
    used as weights in the statistical analysis.
    The errors on the x-values may be omitted, since they are not used in the process.
 2) <span class="string">"hout"</span> must be an existing 1-dimenstional histogram.

 Each new block is started at a so called Change Point, to indicate a significant change
 in the measured value based on the recordings in the provided TGraphErrors object.
 The various Change Points represent the start of the various (variable) sized bins
 of the resulting histogram <span class="string">"hout"</span>.
 Since the data treatment is inherently sequential, the user may use the argument <span class="string">"ntrig"</span>
 to trigger c.q. stop after the occurrence of ntrig Change Points.
 For instance, an online trigger system may be obtained by specifying ntrig=1.

 Meaning of the input argument <span class="string">"ntrig"</span> :

 ntrig &gt;0 : Only consider Change Points indicating a rising edge
       &lt;0 : Only consider Change Points indicating a falling edge
       =0 : No triggering c.q. early stopping of the data processing will be performed

 The default value is ntrig=0.

 The returned value is the <span class="string">"X-value"</span> of the selected Change Point, e.g. trigger time.
 In case ntrig=0 the return value corresponds to the 1st Change Point, irrespective
 whether that represents a rising or falling edge.

 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="NcBlocks:GetBlocks@6" href="src/NcBlocks.cxx.html#d22qsE">GetBlocks</a>(TGraph gr, TF1 f, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</span><br />
<div class="funccomm"><pre> Get the Bayesian Block partitions for measurements of an observable (Data Mode 3)
 with a <a href="./ListOfTypes.html#bool">false</a> positive rate <span class="string">"fpr"</span>, and provide the results in 1-D histogram <span class="string">"hout"</span>.

 Notes :

 1) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.
 2) The other member function with TGraphErrors input provides more flexibilty.

 The error of each y-value is determined by the absolute value of f(y).
 This provides an easy way to perform quickly a Bayesian Block analysis directly
 on a TGraph object instead of having to convert it first into a TGraphErrors object.
 However, the error setting facility provided here is rather limited, so it
 is intended to serve only for simple situations.
 For more flexibility and accuracy, please refer to the other member function that
 takes a TGraphErrors object as input, or refer to the class <a href="./NcSample.html">NcSample</a> which
 contains a facility to extend TGraph objects into TGraphError objects.

 Note :

 It is essential that the errors on the y-values are provided, since they are
 used as weights in the statistical analysis.
 The errors on the x-values are omitted, since they are not used in the process.

 Each new block is started at a so called Change Point, to indicate a significant change
 in the measured value based on the recordings in the provided TGraphErrors object.
 The various Change Points represent the start of the various (variable) sized bins
 of the resulting histogram <span class="string">"hout"</span>.
 Since the data treatment is inherently sequential, the user may use the argument <span class="string">"ntrig"</span>
 to trigger c.q. stop after the occurrence of ntrig Change Points.
 For instance, an online trigger system may be obtained by specifying ntrig=1.

 Meaning of the input argument <span class="string">"ntrig"</span> :

 ntrig &gt;0 : Only consider Change Points indicating a rising edge
       &lt;0 : Only consider Change Points indicating a falling edge
       =0 : No triggering c.q. early stopping of the data processing will be performed

 The default value is ntrig=0.

 The returned value is the <span class="string">"X-value"</span> of the selected Change Point, e.g. trigger time.
 In case ntrig=0 the return value corresponds to the 1st Change Point, irrespective
 whether that represents a rising or falling edge.

 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="NcBlocks:GetBlocks@7" href="src/NcBlocks.cxx.html#AOLNg">GetBlocks</a>(TGraph gr, TString f, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</span><br />
<div class="funccomm"><pre> Get the Bayesian Block partitions for measurements of an observable (Data Mode 3)
 with a <a href="./ListOfTypes.html#bool">false</a> positive rate <span class="string">"fpr"</span>, and provide the results in 1-D histogram <span class="string">"hout"</span>.

 Notes :

 1) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.
 2) The other member function with TGraphErrors input provides more flexibilty.

 The error of each y-value is determined by the absolute value of f(y), where the
 function is described by the input argument <span class="string">"f"</span> following the TF1 string format convention.
 This provides an easy way to perform quickly a Bayesian Block analysis directly
 on a TGraph object instead of having to convert it first into a TGraphErrors object.
 However, the error setting facility provided here is rather limited, so it
 is intended to serve only for simple situations.
 For more flexibility and accuracy, please refer to the other member function that
 takes a TGraphErrors object as input, or refer to the class <a href="./NcSample.html">NcSample</a> which
 contains a facility to extend TGraph objects into TGraphError objects.

 Note :

 It is essential that the errors on the y-values are provided, since they are
 used as weights in the statistical analysis.
 The errors on the x-values are omitted, since they are not used in the process.

 Each new block is started at a so called Change Point, to indicate a significant change
 in the measured value based on the recordings in the provided TGraphErrors object.
 The various Change Points represent the start of the various (variable) sized bins
 of the resulting histogram <span class="string">"hout"</span>.
 Since the data treatment is inherently sequential, the user may use the argument <span class="string">"ntrig"</span>
 to trigger c.q. stop after the occurrence of ntrig Change Points.
 For instance, an online trigger system may be obtained by specifying ntrig=1.

 Meaning of the input argument <span class="string">"ntrig"</span> :

 ntrig &gt;0 : Only consider Change Points indicating a rising edge
       &lt;0 : Only consider Change Points indicating a falling edge
       =0 : No triggering c.q. early stopping of the data processing will be performed

 The default value is ntrig=0.

 The returned value is the <span class="string">"X-value"</span> of the selected Change Point, e.g. trigger time.
 In case ntrig=0 the return value corresponds to the 1st Change Point, irrespective
 whether that represents a rising or falling edge.

 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Double_t">Double_t</a> <a class="funcname" name="NcBlocks:GetBlocks@8" href="src/NcBlocks.cxx.html#tSXFn">GetBlocks</a>(TGraph gr, <a href="./ListOfTypes.html#Double_t">Double_t</a> nrms, <a href="./ListOfTypes.html#Double_t">Double_t</a> fpr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> ntrig = 0)</span><br />
<div class="funccomm"><pre> Get the Bayesian Block partitions for measurements of an observable (Data Mode 3)
 with a <a href="./ListOfTypes.html#bool">false</a> positive rate <span class="string">"fpr"</span>, and provide the results in 1-D histogram <span class="string">"hout"</span>.

 Notes :

 1) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.
 2) The other member function with TGraphErrors input provides more flexibilty.

 The error of each y-value is determined by <span class="string">"nrms"</span> times the RMS deviation of all the y-values,
 which often provides an efficient way to ignore noise variations of a background pedestal.
 This provides an easy way to perform quickly a Bayesian Block analysis directly
 on a TGraph object instead of having to convert it first into a TGraphErrors object.
 However, the error setting facility provided here is rather limited, so it
 is intended to serve only for simple situations.
 For more flexibility and accuracy, please refer to the other member function that
 takes a TGraphErrors object as input, or refer to the class <a href="./NcSample.html">NcSample</a> which
 contains a facility to extend TGraph objects into TGraphError objects.

 Note :

 It is essential that the errors on the y-values are provided, since they are
 used as weights in the statistical analysis.
 The errors on the x-values are omitted, since they are not used in the process.

 Each new block is started at a so called Change Point, to indicate a significant change
 in the measured value based on the recordings in the provided TGraphErrors object.
 The various Change Points represent the start of the various (variable) sized bins
 of the resulting histogram <span class="string">"hout"</span>.
 Since the data treatment is inherently sequential, the user may use the argument <span class="string">"ntrig"</span>
 to trigger c.q. stop after the occurrence of ntrig Change Points.
 For instance, an online trigger system may be obtained by specifying ntrig=1.

 Meaning of the input argument <span class="string">"ntrig"</span> :

 ntrig &gt;0 : Only consider Change Points indicating a rising edge
       &lt;0 : Only consider Change Points indicating a falling edge
       =0 : No triggering c.q. early stopping of the data processing will be performed

 The default value is ntrig=0.

 The returned value is the <span class="string">"X-value"</span> of the selected Change Point, e.g. trigger time.
 In case ntrig=0 the return value corresponds to the 1st Change Point, irrespective
 whether that represents a rising or falling edge.

 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Int_t">Int_t</a> <a class="funcname" name="NcBlocks:GetBlocks@9" href="src/NcBlocks.cxx.html#xrpBxB">GetBlocks</a>(TH1* hin, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</span><br />
<div class="funccomm"><pre> Get the block partitions consisting of <span class="string">"n"</span> consecutive bins for binned data
 contained in histogram <span class="string">"hin"</span> with as block height the mean, median or RMS value
 of the contained <span class="string">"n"</span> bins and provide the results in the 1-D histogram <span class="string">"hout"</span>.

 This facility provides an efficient way to identify pedestal variations in case these
 might be expected to occur after recording <span class="string">"n"</span> samples due to the specific DAQ design.

 mode = 0 --&gt; Use the mean as average value
        1 --&gt; Use the median as average value
        2 --&gt; Use the Root Mean Square (RMS) as average value
              Note : This is NOT the RMS deviation defined as sqrt(variance)

 The default value is mode=0;

 Notes :

 1) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.
 2) The blocks represent the bins of <span class="string">"hout"</span>, which may have variable length
    in case the sampling was not continuous.
    As such, the structure of the output histogram is comparable to the result
    of a Bayesian Block analysis.

 The returned value is the number of produced blocks.
 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Int_t">Int_t</a> <a class="funcname" name="NcBlocks:GetBlocks@10" href="src/NcBlocks.cxx.html#W5llWB">GetBlocks</a>(<a href="./NcSample.html">NcSample</a> s, <a href="./ListOfTypes.html#Int_t">Int_t</a> i, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</span><br />
<div class="funccomm"><pre> Get the block partitions consisting of <span class="string">"n"</span> consecutive samplings for the
 i-th variable of <a href="./NcSample.html">NcSample</a> <span class="string">"s"</span>, with as block height the mean, median or RMS value
 of the contained <span class="string">"n"</span> samples and provide the results in the 1-D histogram <span class="string">"hout"</span>.

 This facility provides an efficient way to identify pedestal variations in case these
 might be expected to occur after recording <span class="string">"n"</span> samples due to the specific DAQ design.

 mode = 0 --&gt; Use the mean as average value
        1 --&gt; Use the median as average value
        2 --&gt; Use the Root Mean Square (RMS) as average value
              Note : This is NOT the RMS deviation defined as sqrt(variance)

 The default value is mode=0;

 Notes :

 1) The Store Mode of the <a href="./NcSample.html">NcSample</a> must be activated.
 2) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.
 3) The blocks represent the bins of <span class="string">"hout"</span>, which may have variable length
    in case the sampling was not continuous.
    As such, the structure of the output histogram is comparable to the result
    of a Bayesian Block analysis.

 The returned value is the number of produced blocks.
 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Int_t">Int_t</a> <a class="funcname" name="NcBlocks:GetBlocks@11" href="src/NcBlocks.cxx.html#rGTBdB">GetBlocks</a>(<a href="./NcSample.html">NcSample</a> s, TString name, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</span><br />
<div class="funccomm"><pre> Get the block partitions consisting of <span class="string">"n"</span> consecutive samplings for the
 named variable of <a href="./NcSample.html">NcSample</a> <span class="string">"s"</span>, with as block height the mean, median or RMS value
 of the contained <span class="string">"n"</span> samples and provide the results in the 1-D histogram <span class="string">"hout"</span>.

 This facility provides an efficient way to identify pedestal variations in case these
 might be expected to occur after recording <span class="string">"n"</span> samples due to the specific DAQ design.

 mode = 0 --&gt; Use the mean as average value
        1 --&gt; Use the median as average value
        2 --&gt; Use the Root Mean Square (RMS) as average value
              Note : This is NOT the RMS deviation defined as sqrt(variance)

 The default value is mode=0;

 Notes :

 1) The Store Mode of the <a href="./NcSample.html">NcSample</a> must be activated.
 2) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.
 3) The blocks represent the bins of <span class="string">"hout"</span>, which may have variable length
    in case the sampling was not continuous.
    As such, the structure of the output histogram is comparable to the result
    of a Bayesian Block analysis.

 The returned value is the number of produced blocks.
 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Int_t">Int_t</a> <a class="funcname" name="NcBlocks:GetBlocks@12" href="src/NcBlocks.cxx.html#wYRCC">GetBlocks</a>(<a href="./ListOfTypes.html#Int_t">Int_t</a> nr, <a href="./ListOfTypes.html#Double_t">Double_t</a>* arr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</span><br />
<div class="funccomm"><pre> Get the block partitions consisting of <span class="string">"n"</span> consecutive elements of the <span class="string">"nr"</span> data recordings
 contained in the data array <span class="string">"arr"</span>, and provide the results in the 1-D histogram <span class="string">"hout"</span>.

 This facility provides an efficient way to identify pedestal variations in case these
 might be expected to occur after recording <span class="string">"n"</span> samples due to the specific DAQ design.

 mode = 0 --&gt; Use the mean as average value
        1 --&gt; Use the median as average value
        2 --&gt; Use the Root Mean Square (RMS) as average value
              Note : This is NOT the RMS deviation defined as sqrt(variance)

 The default value is mode=0;

 Notes :

 1) The data elements in the array <span class="string">"arr"</span> do not need to be ordered.
 2) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.
 3) The blocks represent the bins of <span class="string">"hout"</span>, which may have variable length
    in case the sampling was not continuous.
    As such, the structure of the output histogram is comparable to the result
    of a Bayesian Block analysis.

 The returned value is the number of produced blocks.
 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Int_t">Int_t</a> <a class="funcname" name="NcBlocks:GetBlocks@13" href="src/NcBlocks.cxx.html#XNXHIC">GetBlocks</a>(<a href="./ListOfTypes.html#Int_t">Int_t</a> nr, <a href="./ListOfTypes.html#Float_t">Float_t</a>* arr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</span><br />
<div class="funccomm"><pre> Get the block partitions consisting of <span class="string">"n"</span> consecutive elements of the <span class="string">"nr"</span> data recordings
 contained in the data array <span class="string">"arr"</span>, and provide the results in the 1-D histogram <span class="string">"hout"</span>.

 This facility provides an efficient way to identify pedestal variations in case these
 might be expected to occur after recording <span class="string">"n"</span> samples due to the specific DAQ design.

 mode = 0 --&gt; Use the mean as average value
        1 --&gt; Use the median as average value
        2 --&gt; Use the Root Mean Square (RMS) as average value
              Note : This is NOT the RMS deviation defined as sqrt(variance)

 The default value is mode=0;

 Notes :

 1) The data elements in the array <span class="string">"arr"</span> do not need to be ordered.
 2) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.
 3) The blocks represent the bins of <span class="string">"hout"</span>, which may have variable length
    in case the sampling was not continuous.
    As such, the structure of the output histogram is comparable to the result
    of a Bayesian Block analysis.

 The returned value is the number of produced blocks.
 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><a href="./ListOfTypes.html#Int_t">Int_t</a> <a class="funcname" name="NcBlocks:GetBlocks@14" href="src/NcBlocks.cxx.html#RiNf5D">GetBlocks</a>(TGraph* gr, TH1* hout, <a href="./ListOfTypes.html#Int_t">Int_t</a> n, <a href="./ListOfTypes.html#Int_t">Int_t</a> mode = 0)</span><br />
<div class="funccomm"><pre> Get the block partitions consisting of <span class="string">"n"</span> consecutive samples for measurements
 of an observable with as block height the mean, median or RMS of the values
 of the contained <span class="string">"n"</span> samples and provide the results in the 1-D histogram <span class="string">"hout"</span>.

 This facility provides an efficient way to identify pedestal variations in case these
 might be expected to occur after recording <span class="string">"n"</span> samples due to the specific DAQ design.

 mode = 0 --&gt; Use the mean as average value
        1 --&gt; Use the median as average value
        2 --&gt; Use the Root Mean Square (RMS) as average value
              Note : This is NOT the RMS deviation defined as sqrt(variance)

 The default value is mode=0;

 Notes :

 1) <span class="string">"hout"</span> must be an existing 1-dimensional histogram.
 2) The blocks represent the bins of <span class="string">"hout"</span>, which may have variable length
    in case the sampling was not continuous.
    As such, the structure of the output histogram is comparable to the result
    of a Bayesian Block analysis.

 The returned value is the number of produced blocks.
 In case of inconsistent input, the value 0 is returned.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="NcBlocks:Add" href="src/NcBlocks.cxx.html#Y_i4SB">Add</a>(TH1* h1, TH1* h2, TH1* hout, <a href="./ListOfTypes.html#Bool_t">Bool_t</a> scale, <a href="./ListOfTypes.html#Double_t">Double_t</a> c, <a href="./ListOfTypes.html#Double_t">Double_t</a> d = 0)</span><br />
<div class="funccomm"><pre> Provide the 1-dimensional histogram hout=h1+c*h2+d.
 So, for c=-1 and d=0, the values contained in the histogram <span class="string">"h2"</span> will be
 subtracted from the corresponding bin values of the input histogram <span class="string">"h1"</span>.
 The output histogram <span class="string">"hout"</span> will be given the same binning as the histogram <span class="string">"h1"</span>.

 Note : All histograms <span class="string">"h1"</span>, <span class="string">"h2"</span> and <span class="string">"hout"</span> must be existing 1-dimensional histograms.

 This facility is mainly intended for <span class="string">"adding"</span> the variable binned Bayesian Block values
 (contained in <span class="string">"h2"</span>) to the corresponding values contained in the bins of <span class="string">"h1"</span>.
 However, it can be applied to other combinations of 1-dimensional histograms as well.

 All provided histograms have to be 1-dimensional and histograms with
 variable bin sizes are supported. However, all bin sizes of <span class="string">"h1"</span>
 have to be smaller than or equal to the smallest bin size of <span class="string">"h2"</span>.
 Obviously, this is always the case when <span class="string">"h2"</span> contains the Bayesian Block
 partitions of <span class="string">"h1"</span>.

 The input parameter <span class="string">"scale"</span> allows to scale (<a href="./ListOfTypes.html#Bool_t">kTRUE</a>) or not scale (<a href="./ListOfTypes.html#Bool_t">kFALSE</a>)
 the bin content of <span class="string">"h2"</span> to be <span class="string">"added"</span>, to the corresponding bin width of <span class="string">"h1"</span>.

 Note :

 Since this facility is mainly intended for <span class="string">"adding"</span> variable binned Bayesian Blocks,
 scaling should *not* be used in case of mode 3 data, whereas for mode 2 data
 the use of scaling will correctly reflect the resulting (event) counts in each bin.

 The default value is d=0.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="NcBlocks:Add@1" href="src/NcBlocks.cxx.html#KBTKS">Add</a>(TGraph* gr, TH1* h, TGraph* gout, <a href="./ListOfTypes.html#Double_t">Double_t</a> c, <a href="./ListOfTypes.html#Double_t">Double_t</a> d = 0)</span><br />
<div class="funccomm"><pre> Provide the TGraph gout=gr+c*h+d, where <span class="string">"h"</span> is a 1-dimensional histogram.
 So, for c=-1 and d=0, the values contained in the histogram <span class="string">"h"</span> will be
 subtracted from the corresponding values of the input graph <span class="string">"gr"</span>.

 Notes :

 1) Both graphs <span class="string">"gr"</span> and <span class="string">"gout"</span> as well as histogram <span class="string">"h"</span> must be existing.
 2) In case both <span class="string">"gr"</span> and <span class="string">"gout"</span> are TGraphErrors objects, the errors
    of <span class="string">"gout"</span> will be set to the values of the errors of the input graph <span class="string">"gr"</span>.

 This facility is mainly intended for <span class="string">"adding"</span> the variable binned Bayesian Block values
 corresponding to the mode 3 data contained in the graph <span class="string">"gr"</span>.
 However, it can be applied to any combination of input graph <span class="string">"gr"</span> and histogram <span class="string">"h"</span>.

 The default value is d=0.
</pre></div>
</div>
<div class="funcdoc"><span class="funcname"><span class="keyword">void</span> <a class="funcname" name="NcBlocks:Rebin" href="src/NcBlocks.cxx.html#sskJMB">Rebin</a>(TH1* hin, TH1* hout, <a href="./ListOfTypes.html#Bool_t">Bool_t</a> scale, <a href="./ListOfTypes.html#Int_t">Int_t</a> nbins = 0, <a href="./ListOfTypes.html#Double_t">Double_t</a> xmin = 0, <a href="./ListOfTypes.html#Double_t">Double_t</a> xmax = -1)</span><br />
<div class="funccomm"><pre> Provide the 1-dimensional histogram <span class="string">"hout"</span> as a uniformly binned version of the
 input 1-dimensional histogram <span class="string">"hin"</span> over the interval [xmin,xmax].
 This will for instance allow a Fourier analysis of a Bayesian Block result in the time domain.

 Note : Both histograms <span class="string">"hin"</span> and <span class="string">"hout"</span> must be existing 1-dimensional histograms.

 The bin size of <span class="string">"hout"</span> has to be smaller than or equal to the smallest bin size of
 <span class="string">"hin"</span> encountered in the interval [xmin,xmax] (see also notes below).

 Function arguments :

 hin   : Pointer to the input histogram
 hout  : Pointer to the output histogram
 scale : Scale the bin content to the bin width (<a href="./ListOfTypes.html#Bool_t">kTRUE</a>) or not (<a href="./ListOfTypes.html#Bool_t">kFALSE</a>)
 nbins : The number of bins for the output histogram (see notes below)
 xmin  : The minimal x-value for the output histogram (see notes below)
 xmax  : The maximal x-value for the output histogram (see notes below)

 Notes :

 1) Since this facility is mainly intended for re-binning variable binned Bayesian Blocks,
    scaling should *not* be used in case of mode 3 data, whereas for mode 2 data
    the use of scaling will correctly reflect the number of (event) counts in each bin.
 2) If nbins&lt;1 the bin size of <span class="string">"hout"</span> will automatically be set to the smallest bin size of
    <span class="string">"hin"</span> that is encountered in the interval [xmin,xmax].
 3) In case xmax&lt;xmin, the xmin and xmax values of the input histogram are used.

 The default values are nbins=0, xmin=0 and xmax=-1.
</pre></div>
</div>

<br />
<!--SIGNATURE-->
<div id="footer">

<em>&raquo; Last changed: Thu Oct 17 15:17:05 2024 </em><em>&raquo; Last generated: 2024-10-17 15:17</em><br />
<em>This page has been automatically generated. For comments or suggestions regarding the documentation or ROOT in general please send a mail to <a href="mailto:rootdev@cern.ch">ROOT support</a>.</em>
</div>
</div>
</body>
</html>
